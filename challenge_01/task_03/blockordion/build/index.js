/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./node_modules/@wordpress/icons/build-module/library/arrow-down.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@wordpress/icons/build-module/library/arrow-down.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @wordpress/primitives */ "@wordpress/primitives");
/* harmony import */ var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__);

/**
 * WordPress dependencies
 */

const arrowDown = (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.SVG, {
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 24 24"
}, (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.Path, {
  d: "m16.5 13.5-3.7 3.7V4h-1.5v13.2l-3.8-3.7-1 1 5.5 5.6 5.5-5.6z"
}));
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (arrowDown);
//# sourceMappingURL=arrow-down.js.map

/***/ }),

/***/ "./node_modules/@wordpress/icons/build-module/library/arrow-up.js":
/*!************************************************************************!*\
  !*** ./node_modules/@wordpress/icons/build-module/library/arrow-up.js ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @wordpress/primitives */ "@wordpress/primitives");
/* harmony import */ var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__);

/**
 * WordPress dependencies
 */

const arrowUp = (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.SVG, {
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 24 24"
}, (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.Path, {
  d: "M12 3.9 6.5 9.5l1 1 3.8-3.7V20h1.5V6.8l3.7 3.7 1-1z"
}));
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (arrowUp);
//# sourceMappingURL=arrow-up.js.map

/***/ }),

/***/ "./node_modules/@wordpress/icons/build-module/library/more-vertical.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@wordpress/icons/build-module/library/more-vertical.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @wordpress/primitives */ "@wordpress/primitives");
/* harmony import */ var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__);

/**
 * WordPress dependencies
 */

const moreVertical = (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.SVG, {
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 24 24"
}, (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.Path, {
  d: "M13 19h-2v-2h2v2zm0-6h-2v-2h2v2zm0-6h-2V5h2v2z"
}));
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (moreVertical);
//# sourceMappingURL=more-vertical.js.map

/***/ }),

/***/ "./node_modules/@wordpress/icons/build-module/library/trash.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@wordpress/icons/build-module/library/trash.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @wordpress/primitives */ "@wordpress/primitives");
/* harmony import */ var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__);

/**
 * WordPress dependencies
 */

const trash = (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.SVG, {
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 24 24"
}, (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.Path, {
  fillRule: "evenodd",
  clipRule: "evenodd",
  d: "M12 5.5A2.25 2.25 0 0 0 9.878 7h4.244A2.251 2.251 0 0 0 12 5.5ZM12 4a3.751 3.751 0 0 0-3.675 3H5v1.5h1.27l.818 8.997a2.75 2.75 0 0 0 2.739 2.501h4.347a2.75 2.75 0 0 0 2.738-2.5L17.73 8.5H19V7h-3.325A3.751 3.751 0 0 0 12 4Zm4.224 4.5H7.776l.806 8.861a1.25 1.25 0 0 0 1.245 1.137h4.347a1.25 1.25 0 0 0 1.245-1.137l.805-8.861Z"
}));
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (trash);
//# sourceMappingURL=trash.js.map

/***/ }),

/***/ "./src/components/BlockordionItem.js":
/*!*******************************************!*\
  !*** ./src/components/BlockordionItem.js ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _wordpress_block_editor__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @wordpress/block-editor */ "@wordpress/block-editor");
/* harmony import */ var _wordpress_block_editor__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_wordpress_block_editor__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _ItemSubmenu__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ItemSubmenu */ "./src/components/ItemSubmenu.js");
/* harmony import */ var _edit__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../edit */ "./src/edit.js");
/* harmony import */ var _hooks_useUpdate__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../hooks/useUpdate */ "./src/hooks/useUpdate.js");
/* harmony import */ var _tools__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../tools */ "./src/tools.js");







function BlockordionItem(props) {
  const refItem = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();
  const refArticle = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();
  const refTitle = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();
  const refBlockordionContent = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();
  const refBtnExpandable = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();
  const doUpdate = (0,_hooks_useUpdate__WEBPACK_IMPORTED_MODULE_4__["default"])();
  const [dropAreaActive, setDropAreaActive, draggedItemRef, draggedOverRef] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(_edit__WEBPACK_IMPORTED_MODULE_3__.DragAndDropContext);
  const {
    itemId,
    title,
    children: content,
    isExpanded,
    isActive,
    saveDataItem,
    moveDataItem,
    activateItem,
    addItemAbove,
    addItemBelow,
    deleteItem
  } = props;

  /**
   * Adjust the item height if it is expanded
   */
  function adjustContentHeight() {
    const isExpanded = refBtnExpandable.current.classList.contains('blockordion__expanded');
    const articleHeight = isExpanded ? refArticle.current.clientHeight + 50 + 'px' : "";
    refBlockordionContent.current.style.height = articleHeight;
  }

  /**
   * Manage expand/collapse of each accordion item
   *
   * @param e
   */
  function blockordionToggle(e) {
    const btnExpandableEl = e.target;
    let expanded = btnExpandableEl.classList.contains('blockordion__expanded');
    if (expanded) {
      btnExpandableEl.classList.remove('blockordion__expanded');
    } else {
      btnExpandableEl.classList.add('blockordion__expanded');
    }

    // This will allow the Height adjustment
    saveDataItem({
      itemId,
      title,
      content,
      isExpanded: !expanded
    });
  }

  /**
   * Drag and Drop Management
   *
   * Emulates drag and drop because Gutenberg seems to block
   * native drag and drop inside custom blocks.
   */
  const dragAndDrop = function () {
    const editorWindowEl = (0,_tools__WEBPACK_IMPORTED_MODULE_5__.getEditorWindowEl)();
    const editorDocumentEl = (0,_tools__WEBPACK_IMPORTED_MODULE_5__.getEditorDocumentEl)();
    const editorBodyEl = (0,_tools__WEBPACK_IMPORTED_MODULE_5__.getEditorBodyEl)();
    const dndPreviewId = 'blockordion-drag-drop';
    let dndPreviewEl;
    function handleMouseMove(e) {
      const x = e.clientX;
      const y = e.clientY;
      const offsetY = editorWindowEl.scrollY;
      dndPreviewEl.style.left = `${x - 15}px`;
      dndPreviewEl.style.top = `${y + offsetY - 15}px`;
    }
    function handleMouseOver(e) {
      if (draggedItemRef.current && draggedItemRef.current !== itemId) {
        draggedOverRef.current = itemId;
        doUpdate();
      }
    }
    function handleMouseOut(e) {
      if (draggedOverRef.current) {
        draggedOverRef.current = null;
        doUpdate();
      }
    }
    function handleMouseUp(e) {
      // check if dropped
      if (draggedOverRef.current) {
        moveDataItem(draggedItemRef.current, draggedOverRef.current);
      }

      // cancel drag
      draggedItemRef.current = null;
      setDropAreaActive(false);
      if (dndPreviewEl) dndPreviewEl.parentElement.removeChild(dndPreviewEl);
      editorDocumentEl.removeEventListener('mousemove', handleMouseMove);
      editorDocumentEl.removeEventListener('mouseup', handleMouseUp);
      (0,_tools__WEBPACK_IMPORTED_MODULE_5__.setCursor)(null);
    }
    function handleDragStart(e, id) {
      draggedItemRef.current = itemId;
      setDropAreaActive(true);

      // clone the item to make preview
      dndPreviewEl = editorDocumentEl.getElementById(dndPreviewId);
      if (!dndPreviewEl) {
        dndPreviewEl = document.createElement('div');
        dndPreviewEl.id = dndPreviewId;
      } else {
        dndPreviewEl.innerHTML = '';
      }

      // set container size
      dndPreviewEl.style.width = refItem.current.parentElement.clientWidth - 20 + 'px';
      dndPreviewEl.appendChild(refItem.current.cloneNode(true));
      editorBodyEl.appendChild(dndPreviewEl);

      // set mouse listeners
      editorDocumentEl.addEventListener('mousemove', handleMouseMove);
      editorDocumentEl.addEventListener('mouseup', handleMouseUp);
      (0,_tools__WEBPACK_IMPORTED_MODULE_5__.setCursor)('grab');
    }
    return {
      handleDragStart,
      handleMouseOver,
      handleMouseOut
    };
  }();

  /**
   * Various Initializations
   */
  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {
    adjustContentHeight();

    // give focus to RichText if item is active
    let activeElement = document.activeElement;
    if (activeElement.nodeName === "IFRAME") {
      activeElement = activeElement.contentDocument.activeElement;
    }
    if (isActive && !refItem.current.contains(activeElement)) {
      refTitle.current.focus();
    }
  });
  return (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(React.Fragment, null, (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)("section", {
    className: "blockordion__item" + (isActive ? " blockordion__active" : "") + (draggedOverRef.current === itemId ? " blockordion__drag-over" : ""),
    ref: refItem,
    onClick: e => {
      activateItem();
    }
  }, (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)("div", {
    className: "blockordion__mouseover_area" + (dropAreaActive ? " blockordion__mouseover_area--active" : ""),
    onMouseOver: dragAndDrop.handleMouseOver,
    onMouseOut: dragAndDrop.handleMouseOut
  }), (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)("header", null, (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)("div", {
    className: "blockordion__drag-handle",
    draggable: true,
    onDragStart: dragAndDrop.handleDragStart
  }), (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_block_editor__WEBPACK_IMPORTED_MODULE_1__.RichText, {
    tagName: "div",
    ref: refTitle,
    className: "blockordion__title",
    placeholder: "Title of the item",
    allowedFormats: [],
    value: title,
    onChange: title => {
      saveDataItem({
        itemId,
        title,
        isExpanded,
        content: refArticle.current.innerHTML
      });
    }
  }), (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)("div", {
    className: "blockordion__navbar"
  }, (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)("div", {
    className: "blockordion__button blockordion__expandable" + (isExpanded ? " blockordion__expanded" : ""),
    onClick: blockordionToggle,
    ref: refBtnExpandable
  }), (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_ItemSubmenu__WEBPACK_IMPORTED_MODULE_2__.ItemSubmenu, {
    addItemAbove: addItemAbove,
    addItemBelow: addItemBelow,
    deleteItem: deleteItem
  }))), (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)("div", {
    className: "blockordion__content",
    ref: refBlockordionContent
  }, (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_block_editor__WEBPACK_IMPORTED_MODULE_1__.RichText, {
    tagName: "article",
    ref: refArticle,
    placeholder: "Please type the content of the item here...",
    value: content,
    onChange: content => {
      saveDataItem({
        itemId,
        title: refTitle.current.innerText,
        content,
        isExpanded
      });
    }
  }))));
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (BlockordionItem);

/***/ }),

/***/ "./src/components/ItemSubmenu.js":
/*!***************************************!*\
  !*** ./src/components/ItemSubmenu.js ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ItemSubmenu: () => (/* binding */ ItemSubmenu)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _wordpress_components__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @wordpress/components */ "@wordpress/components");
/* harmony import */ var _wordpress_components__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_wordpress_components__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _wordpress_icons__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @wordpress/icons */ "./node_modules/@wordpress/icons/build-module/library/arrow-up.js");
/* harmony import */ var _wordpress_icons__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @wordpress/icons */ "./node_modules/@wordpress/icons/build-module/library/arrow-down.js");
/* harmony import */ var _wordpress_icons__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @wordpress/icons */ "./node_modules/@wordpress/icons/build-module/library/trash.js");
/* harmony import */ var _wordpress_icons__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @wordpress/icons */ "./node_modules/@wordpress/icons/build-module/library/more-vertical.js");



function ItemSubmenu(props) {
  const {
    addItemAbove,
    addItemBelow,
    deleteItem
  } = props;
  const menuControls = [{
    title: 'Add New Item Above',
    icon: _wordpress_icons__WEBPACK_IMPORTED_MODULE_2__["default"],
    onClick: addItemAbove
  }, {
    title: 'Add New Item Below',
    icon: _wordpress_icons__WEBPACK_IMPORTED_MODULE_3__["default"],
    onClick: addItemBelow
  }];
  if (deleteItem) {
    menuControls.push({
      title: 'Delete Current Item',
      icon: _wordpress_icons__WEBPACK_IMPORTED_MODULE_4__["default"],
      onClick: deleteItem
    });
  }
  return (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_components__WEBPACK_IMPORTED_MODULE_1__.DropdownMenu, {
    className: "",
    icon: _wordpress_icons__WEBPACK_IMPORTED_MODULE_5__["default"],
    label: "Settings",
    controls: menuControls
  });
}


/***/ }),

/***/ "./src/edit.js":
/*!*********************!*\
  !*** ./src/edit.js ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DragAndDropContext: () => (/* binding */ DragAndDropContext),
/* harmony export */   Edit: () => (/* binding */ Edit)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @wordpress/i18n */ "@wordpress/i18n");
/* harmony import */ var _wordpress_i18n__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _wordpress_block_editor__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @wordpress/block-editor */ "@wordpress/block-editor");
/* harmony import */ var _wordpress_block_editor__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_wordpress_block_editor__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _editor_scss__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./editor.scss */ "./src/editor.scss");
/* harmony import */ var _components_BlockordionItem__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./components/BlockordionItem */ "./src/components/BlockordionItem.js");
/* harmony import */ var _tools__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./tools */ "./src/tools.js");

/**
 * Retrieves the translation of text.
 *
 * @see https://developer.wordpress.org/block-editor/reference-guides/packages/packages-i18n/
 */


/**
 * React hook that is used to mark the block wrapper element.
 * It provides all the necessary props like the class name.
 *
 * @see https://developer.wordpress.org/block-editor/reference-guides/packages/packages-block-editor/#useblockprops
 */


/**
 * Lets webpack process CSS, SASS or SCSS files referenced in JavaScript files.
 * Those files can contain any CSS code that gets applied to the editor.
 *
 * @see https://www.npmjs.com/package/@wordpress/scripts#using-css
 */





/**
 * The edit function describes the structure of your block in the context of the
 * editor. This represents what the editor will render when the block is used.
 *
 * @see https://developer.wordpress.org/block-editor/reference-guides/block-api/block-edit-save/#edit
 *
 * @return {Element} Element to render.
 */

const DragAndDropContext = (0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)();
function Edit({
  attributes,
  setAttributes
}) {
  const {
    data,
    activeItem
  } = attributes;
  const [draggedItem, setDraggedItem] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);
  const [dropAreaActive, setDropAreaActive] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);
  const draggedItemRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);
  const draggedOverRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);

  /**
   * Saves changes
   *
   * @param itemAttributes
   */
  function saveDataItem(itemAttributes) {
    const blockordionData = {
      ...data
    };
    blockordionData[itemAttributes.itemId] = {
      title: itemAttributes.title,
      content: itemAttributes.content,
      isExpanded: itemAttributes.isExpanded
    };
    setAttributes({
      data: blockordionData
    });
  }
  function moveDataItem(itemId, toItemId) {
    const blockordionData = {};
    if (itemId === toItemId) {
      return;
    }
    for (const currentItemId in data) {
      if (currentItemId === itemId) continue;
      if (currentItemId === toItemId) {
        blockordionData[itemId] = data[itemId];
      }
      blockordionData[currentItemId] = data[currentItemId];
    }
    setAttributes({
      data: blockordionData
    });
  }
  function deleteItem(itemId) {
    const blockordionData = {};
    for (const currentItemId in data) {
      if (currentItemId === itemId) continue;
      blockordionData[currentItemId] = data[currentItemId];
    }
    setAttributes({
      data: blockordionData
    });
  }
  function showDeleteItemSubmenu() {
    return Object.keys({
      ...data
    }).length > 1;
  }

  /**
   * Adds a new item relative to the current item
   *
   * @param currentItemId
   * @param position
   */
  function addNewItem(currentItemId = null, position = null) {
    const newData = {};
    const newItemId = (0,_tools__WEBPACK_IMPORTED_MODULE_5__.convertToLetters)(Date.now());
    const newItem = {
      title: "",
      content: "",
      isExpanded: true
    };
    if (currentItemId) {
      for (const itemId in data) {
        // insert new item above
        if (itemId === currentItemId && position === -1) {
          newData[newItemId] = newItem;
        }

        // insert item
        newData[itemId] = data[itemId];

        // insert new item below
        if (itemId === currentItemId && position === 1) {
          newData[newItemId] = newItem;
        }
      }
    } else {
      newData[newItemId] = newItem;
    }
    setAttributes({
      activeItem: newItemId,
      data: newData
    });
  }

  /**
   * Sets the item as active or deactivate all
   *
   * @param itemId
   */
  function setActiveItem(itemId = null) {
    setAttributes({
      activeItem: itemId
    });
  }
  return (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(DragAndDropContext.Provider, {
    value: [dropAreaActive, setDropAreaActive, draggedItemRef, draggedOverRef]
  }, (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)("section", {
    ...(0,_wordpress_block_editor__WEBPACK_IMPORTED_MODULE_2__.useBlockProps)()
  }, function () {
    const blockordionItems = [];
    for (const itemId in data) {
      blockordionItems.push((0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_components_BlockordionItem__WEBPACK_IMPORTED_MODULE_4__["default"], {
        itemId: itemId,
        title: data[itemId].title,
        isExpanded: data[itemId].isExpanded,
        isActive: activeItem === itemId,
        isDropAreaActive: dropAreaActive,
        key: itemId,
        saveDataItem: saveDataItem,
        moveDataItem: moveDataItem,
        activateItem: () => {
          setActiveItem(itemId);
        },
        addItemAbove: () => {
          addNewItem(itemId, -1);
        },
        addItemBelow: () => {
          addNewItem(itemId, 1);
        },
        deleteItem: showDeleteItemSubmenu() ? () => {
          deleteItem(itemId);
        } : null
      }, data[itemId].content));
    }
    return blockordionItems;
  }())));
}


/***/ }),

/***/ "./src/hooks/useUpdate.js":
/*!********************************!*\
  !*** ./src/hooks/useUpdate.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

function useUpdate() {
  const [flag, setFlag] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);
  return function () {
    setFlag(!flag);
  };
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (useUpdate);

/***/ }),

/***/ "./src/index.js":
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @wordpress/blocks */ "@wordpress/blocks");
/* harmony import */ var _wordpress_blocks__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _style_scss__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./style.scss */ "./src/style.scss");
/* harmony import */ var _edit__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./edit */ "./src/edit.js");
/* harmony import */ var _block_json__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./block.json */ "./src/block.json");
/**
 * Registers a new block provided a unique name and an object defining its behavior.
 *
 * @see https://developer.wordpress.org/block-editor/reference-guides/block-api/block-registration/
 */


/**
 * Lets webpack process CSS, SASS or SCSS files referenced in JavaScript files.
 * All files containing `style` keyword are bundled together. The code used
 * gets applied both to the front of your site and to the editor.
 *
 * @see https://www.npmjs.com/package/@wordpress/scripts#using-css
 */


/**
 * Internal dependencies
 */



/**
 * Every block starts by registering a new block type definition.
 *
 * @see https://developer.wordpress.org/block-editor/reference-guides/block-api/block-registration/
 */
(0,_wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__.registerBlockType)(_block_json__WEBPACK_IMPORTED_MODULE_3__.name, {
  /**
   * @see ./edit.js
   */
  edit: _edit__WEBPACK_IMPORTED_MODULE_2__.Edit
});

/***/ }),

/***/ "./src/tools.js":
/*!**********************!*\
  !*** ./src/tools.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   convertToLetters: () => (/* binding */ convertToLetters),
/* harmony export */   getEditorBodyEl: () => (/* binding */ getEditorBodyEl),
/* harmony export */   getEditorDocumentEl: () => (/* binding */ getEditorDocumentEl),
/* harmony export */   getEditorWindowEl: () => (/* binding */ getEditorWindowEl),
/* harmony export */   setCursor: () => (/* binding */ setCursor)
/* harmony export */ });
function convertToLetters(number) {
  const alphabet = 'abcdefghijklmnopqrstuvwxyz';
  let result = '';
  while (number > 0) {
    let remainder = (number - 1) % 26;
    result = alphabet[remainder] + result;
    number = Math.floor((number - 1) / 26);
  }
  return result;
}
function getEditorWindowEl() {
  var _document$querySelect;
  return (_document$querySelect = document.querySelector('iframe')?.contentWindow) !== null && _document$querySelect !== void 0 ? _document$querySelect : window;
}
function getEditorDocumentEl() {
  var _document$querySelect2;
  return (_document$querySelect2 = document.querySelector('iframe')?.contentDocument) !== null && _document$querySelect2 !== void 0 ? _document$querySelect2 : document;
}
function getEditorBodyEl() {
  return getEditorDocumentEl().body;
}
function setCursor(cursorStyle = null) {
  const el = getEditorBodyEl();
  if (!el) {
    return;
  }

  // remove all cursor styles
  el.classList.forEach(className => {
    if (className.startsWith('cursor__')) {
      el.classList.remove(className);
    }
  });

  // add the new cursor style
  if (cursorStyle) {
    const cursorNewClassName = `cursor__${cursorStyle}`;
    el.classList.add(cursorNewClassName);
  }
}


/***/ }),

/***/ "./src/editor.scss":
/*!*************************!*\
  !*** ./src/editor.scss ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./src/style.scss":
/*!************************!*\
  !*** ./src/style.scss ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "react":
/*!************************!*\
  !*** external "React" ***!
  \************************/
/***/ ((module) => {

module.exports = window["React"];

/***/ }),

/***/ "@wordpress/block-editor":
/*!*************************************!*\
  !*** external ["wp","blockEditor"] ***!
  \*************************************/
/***/ ((module) => {

module.exports = window["wp"]["blockEditor"];

/***/ }),

/***/ "@wordpress/blocks":
/*!********************************!*\
  !*** external ["wp","blocks"] ***!
  \********************************/
/***/ ((module) => {

module.exports = window["wp"]["blocks"];

/***/ }),

/***/ "@wordpress/components":
/*!************************************!*\
  !*** external ["wp","components"] ***!
  \************************************/
/***/ ((module) => {

module.exports = window["wp"]["components"];

/***/ }),

/***/ "@wordpress/i18n":
/*!******************************!*\
  !*** external ["wp","i18n"] ***!
  \******************************/
/***/ ((module) => {

module.exports = window["wp"]["i18n"];

/***/ }),

/***/ "@wordpress/primitives":
/*!************************************!*\
  !*** external ["wp","primitives"] ***!
  \************************************/
/***/ ((module) => {

module.exports = window["wp"]["primitives"];

/***/ }),

/***/ "./src/block.json":
/*!************************!*\
  !*** ./src/block.json ***!
  \************************/
/***/ ((module) => {

module.exports = /*#__PURE__*/JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"imandresi/blockordion","version":"0.1.0","title":"Accordion Block","category":"widgets","icon":"smiley","description":"An accordion block where you can add multiple items that can be toggled.","example":{},"supports":{"html":false},"textdomain":"blockordion","editorScript":"file:./index.js","editorStyle":"file:./index.css","style":"file:./style-index.css","render":"file:./render.php","viewScript":"file:./view.js","attributes":{"activeItem":{"type":"string","default":null},"data":{"type":"object","default":{"abc":{"title":"How Computer Science Works Behind Your Favorite Apps","content":"We use apps for everything from social media to banking, but have you ever wondered how they actually function? This blog post dives into the core concepts of computer science that power these applications. Explore algorithms, data structures, and programming languages – the building blocks that make your apps tick!","isExpanded":false},"def":{"title":"The Rise of the Machines","content":"Artificial Intelligence (AI) is rapidly transforming our world, from facial recognition software to chatbots. This blog post delves into the fascinating world of AI, exploring its capabilities, potential benefits, and ethical considerations. Learn about different types of AI, machine learning, and how we can ensure this technology is used responsibly.","isExpanded":false}}}}}');

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = __webpack_modules__;
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/chunk loaded */
/******/ 	(() => {
/******/ 		var deferred = [];
/******/ 		__webpack_require__.O = (result, chunkIds, fn, priority) => {
/******/ 			if(chunkIds) {
/******/ 				priority = priority || 0;
/******/ 				for(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];
/******/ 				deferred[i] = [chunkIds, fn, priority];
/******/ 				return;
/******/ 			}
/******/ 			var notFulfilled = Infinity;
/******/ 			for (var i = 0; i < deferred.length; i++) {
/******/ 				var [chunkIds, fn, priority] = deferred[i];
/******/ 				var fulfilled = true;
/******/ 				for (var j = 0; j < chunkIds.length; j++) {
/******/ 					if ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {
/******/ 						chunkIds.splice(j--, 1);
/******/ 					} else {
/******/ 						fulfilled = false;
/******/ 						if(priority < notFulfilled) notFulfilled = priority;
/******/ 					}
/******/ 				}
/******/ 				if(fulfilled) {
/******/ 					deferred.splice(i--, 1)
/******/ 					var r = fn();
/******/ 					if (r !== undefined) result = r;
/******/ 				}
/******/ 			}
/******/ 			return result;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/jsonp chunk loading */
/******/ 	(() => {
/******/ 		// no baseURI
/******/ 		
/******/ 		// object to store loaded and loading chunks
/******/ 		// undefined = chunk not loaded, null = chunk preloaded/prefetched
/******/ 		// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded
/******/ 		var installedChunks = {
/******/ 			"index": 0,
/******/ 			"./style-index": 0
/******/ 		};
/******/ 		
/******/ 		// no chunk on demand loading
/******/ 		
/******/ 		// no prefetching
/******/ 		
/******/ 		// no preloaded
/******/ 		
/******/ 		// no HMR
/******/ 		
/******/ 		// no HMR manifest
/******/ 		
/******/ 		__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);
/******/ 		
/******/ 		// install a JSONP callback for chunk loading
/******/ 		var webpackJsonpCallback = (parentChunkLoadingFunction, data) => {
/******/ 			var [chunkIds, moreModules, runtime] = data;
/******/ 			// add "moreModules" to the modules object,
/******/ 			// then flag all "chunkIds" as loaded and fire callback
/******/ 			var moduleId, chunkId, i = 0;
/******/ 			if(chunkIds.some((id) => (installedChunks[id] !== 0))) {
/******/ 				for(moduleId in moreModules) {
/******/ 					if(__webpack_require__.o(moreModules, moduleId)) {
/******/ 						__webpack_require__.m[moduleId] = moreModules[moduleId];
/******/ 					}
/******/ 				}
/******/ 				if(runtime) var result = runtime(__webpack_require__);
/******/ 			}
/******/ 			if(parentChunkLoadingFunction) parentChunkLoadingFunction(data);
/******/ 			for(;i < chunkIds.length; i++) {
/******/ 				chunkId = chunkIds[i];
/******/ 				if(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {
/******/ 					installedChunks[chunkId][0]();
/******/ 				}
/******/ 				installedChunks[chunkId] = 0;
/******/ 			}
/******/ 			return __webpack_require__.O(result);
/******/ 		}
/******/ 		
/******/ 		var chunkLoadingGlobal = globalThis["webpackChunkblockordion"] = globalThis["webpackChunkblockordion"] || [];
/******/ 		chunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));
/******/ 		chunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module depends on other loaded chunks and execution need to be delayed
/******/ 	var __webpack_exports__ = __webpack_require__.O(undefined, ["./style-index"], () => (__webpack_require__("./src/index.js")))
/******/ 	__webpack_exports__ = __webpack_require__.O(__webpack_exports__);
/******/ 	
/******/ })()
;
//# sourceMappingURL=index.js.map